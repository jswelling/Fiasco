<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
  <head>
    <title>Getting Started with Fiasco</title>
  </head>

  <body>
      <h1>Getting Started with Fiasco</h1>

This document is intended to provide hints for running Fiasco.
These instructions apply to serial (single-processor) jobs;
see the separate document <a href="fiasco_parallel.html">here</a> 
for info on running parallel jobs.

<h2>Setting Up Your Account</h2>
To set up your account to run Fiasco, do the following.  These steps
can be done in your .cshrc file.
<ol>
<li>Make sure the environment variables PVM_ROOT and PVM_ARCH are
being set properly.  If PVM has been installed in the usual way in
your home directory, this can usually be done as follows:
<pre>
<kbd>
setenv PVM_ROOT ${HOME}/pvm3
setenv PVM_ARCH `${PVM_ROOT}/lib/pvmgetarch`
</kbd>
</pre>
<li>Set the environment variable FIASCO to point to the Fiasco
executables.  For example, if Fiasco is installed in /usr/local/bin
on your system, do the following.
<pre>
<kbd>
setenv FIASCO /usr/local/bin/Fiasco4.0/bin/${PVM_ARCH}
</kbd>
</pre>
</ol>
<p>
<h2>Analyzing Data</h2>
To analyze a specific fMRI dataset with Fiasco, do the following.
<ol>
<li>Collect the raw data file or Pfiles for the fMRI dataset you want to
analyze.  
<li>Decide which analysis type is appropriate for your data.  Your
	  options are:
<dl compact>
<dt><b>epi</b><dd> for echoplanar imaging with partial k
<dt><b>epi_brain</b><dd> for echoplanar imaging with partial k and
Bayesian analysis
<dt><b>spiral</b><dd> for spiral imaging
<dt><b>spiral_brain</b><dd> for spiral imaging with Bayesian analysis
<dt><b>twoshot</b><dd> for two shot catch-and-hold with partial k
<dt><b>twoshot_brain</b><dd> for two shot catch-and-hold with partial
	      k and Bayesian analysis
</dl>
<li>Add the current working directory followed by ${FIASCO} to the
beginning of your path.  This is necessary to allow local copies of
Fiasco scripts to override those in the general distribution.  For
example,
<pre>
<kbd>
set path = ( . $FIASCO $path )
</kbd>
</pre>
<li>Create an empty working directory for your new analysis.
<li>cd to that directory.
<li>Copy ${FIASCO}/fiasco.local.csh to the current directory, and edit
it to set the temporary scratch space directory to be used.  This
directory must exist;  Fiasco will not create it.  If this is to be
a parallel run, you should also make the changes described
<a href="fiasco_parallel.html">here</a> to fiasco.local.csh .
<li>Copy one of the following files to the current directory, based
on which analysis type you are running:
<ul>
<li><b>epi</b>- epi.local.csh
<li><b>epi_brain</b>- epi_brain.local.csh
<li><b>spiral</b>- spiral.local.csh
<li><b>spiral_brain</b>- spiral_brain.local.csh
<li><b>twoshot</b>- ts.local.csh
<li><b>twoshot_brain</b>- ts_brain.local.csh
</ul>
Edit this file to describe your run, and to describe the experimental
paradigm.  The format for the split file information is given in the
documentation for the 
<a href="generated/intsplit.html">intsplit</a> executable.  Slices
can be dropped from the analysis by assigning them to the NA condition
in this section.
<li>Run the appropriate path through Fiasco.  The commands to do so
for the various types of analysis are as follows:
<ul>
<li><b>epi</b>- <kbd>FIASCO epi</kbd>
<li><b>epi_brain</b>- <kbd>FIASCO epi_brain</kbd>
<li><b>spiral</b>- <kbd>FIASCO spiral</kbd>
<li><b>spiral_brain</b>- <kbd>FIASCO spiral_brain</kbd>
<li><b>twoshot</b>- <kbd>FIASCO twoshot</kbd>
<li><b>twoshot_brain</b>- <kbd>FIASCO twoshot_brain</kbd>
</ul>
<li>Wait while the analysis completes.
</ol>
<p>
<H2>Results</h2>
Fiasco produces a number of subdirectories containing results, as
      follows.
<ul>
<li><b>out</b> contains output logs for the execution.  out/logfile
gives a complete log of the analysis, and is the place to begin looking
for problems.  This file can be checked for progress as the analysis 
proceeds.  The Bayesian analyses will produce separate logs in
this directory.  
<li><b>data</b> contains normal and permuted copies of the input
data after all corrections have been applied.
<li><b>stat</b> contains datasets of statistical analyses.
<li><b>print</b> contains Postscript files displaying the output.
In particular, summary.ps contains run summary information,
parms.ps contains correction parameter information, and regist.ps
contains registration parameter information.  Other files contain
images of statistical analyses of the data.  The directory <b>ps</b>
contains essentially the same files, but with incorrect timestamps.
<li><b>par</b> contains tabular data for the correction parameters
generated by Fiasco.
<li><b>in</b> contains input data to various routines which Fiasco
automatically generates.  The input file for the Bayesian analysis
program vmpfx is probably the most useful thing found here.
</ul>

<h2>Re-starting or Re-Running Your Analysis</h2>
It is often necessary to repeat some or all of your analysis.  You can
copy the appropriate *.steps.csh file to your working directory and
edit it to avoid the steps that are already complete, or to exit
at a desired point.  
<p>
Each time you restart a run, you must remove or rename the old 
<b>out</b> subdirectory.  Fiasco will not overwrite it.  If you are
restarting from scratch, it is suggested that you remove all the
old output subdirectories so that there is no danger of confusing
new results with old.

      <hr>
      <address><a href="mailto:welling@sloth.stat.cmu.edu">Joel Welling</a></address>
<!-- Created: Wed Dec 17 16:56:11 EST 1997 -->
<!-- hhmts start -->
Last modified: Fri May  8 16:49:55 EDT 
<!-- hhmts end -->
  </body>
</html>
