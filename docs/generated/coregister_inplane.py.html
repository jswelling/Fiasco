<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
  <head>
    <title>coregister_inplane.py</title>
  </head>
  <body>
    <h1>coregister_inplane.py</h1>
<h2>Overview</h2>
<pre>

  coregister_inplane.py is used to align functional data with in-plane
  structural scan data.  Its output is a generated shell script which
  can be applied to any statistical Pgh MRI dataset to produce an
  aligned version.

  coregister_inplane.py [-v] [-d] [--oscript scriptName] [--alg algString]
                 GrandMean strippedInplane

    -v requests verbose output
    -d requests debugging output
    --oscript scriptName specifies the name for the output shell
       script which implements the alignment.  The default name
       is "apply_coreg_inplane.gen_csh"
    --alg algString specifies an optimization algorithm.  The
       default depends on the image types of the functional and
       inplane datasets.
    GrandMean  is a functional mean dataset, typically GrandMean
    strippedInplane is a skull-stripped inplane structural dataset

  or

  coregister_inplane.py -help [topic]

</pre>
<h2>Details</h2>
<pre>

  The script uses the following steps to estimate the aligning
  transformation:

    1) The stripped structural dataset is downsampled to the
       functional resolution.
    2) An aligning transformation (translation+rotation) is
       estimated.
    3) The output shell script is generated.  

  The output shell script can be called as follows:

    apply_coreg_inplane.gen_csh funcStat outName upsampName

  where apply_coreg_inplane.gen_csh is the (default) script name,
  funcStat is a functional statistical dataset (for example Tmap_1-2),
  and outName is the name of the shifted and rotated output dataset,
  and upsampName is a dataset like outName but upsampled to the
  inplane structural resolution.  The outName and upsampName
  datasets are translated and rotated to the location of the stripped
  inplane structural dataset; the latter has the same voxel size and 
  corner coordinates as that dataset.

  Note that the skull-stripping must be done with another command.
  Typically one would use the 'strip_skull.py' script, which in turn
  uses software from external packages, for example AFNI's
  3dSkullStrip.  The typical command to do so for an inplane structural
  dataset called Inplane would be:

    strip_skull.py -v Inplane strippedInplane

  Note also that only rotation and translation are used to do the 
  alignment, and that consequently the alignment estimate is limited
  by the different distortions introduced by the imaging methods used
  to create the input datasets.

  The algorithm used to estimate the aligning transformation is
  specified by the algString command line argument.  The format of
  the algorithm string matches that for the estireg3d command, with
  the addition of these terms:

    "gradmag" : align gradient magnitudes of images rather than
                the images themselves
    "meanc" :   scale images so that mean intensities are equal

  If the --alg algString option is not given, the default depends on 
  whether the functional and inplane datasets are either both
  T1-weighted or both T2-weighted (as determined by the "images.tr" 
  tag in the dataset), or if they differ.  If the weightings match, 
  the default algorithm is "opt=praxis,obj=mse,meanc".  If they
  differ, the default algorithm is "opt=nelmin,obj=jointentropy".

</pre>
    <hr>
    (automatically generated by coregister_inplane.py version of Mon Jul 15 00:18:47 2019)
  </body>
</html>
